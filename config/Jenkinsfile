pipeline {
    agent any
    stages{
        stage('拉取代码') {
            steps {
                checkout([$class: 'GitSCM', branches: [[name: '*/master']],
                doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [],
                userRemoteConfigs: [[credentialsId: '9047bf42-b6da-425a-9783-d4d7c69f0290', url:
                'https://github.com/guojun5642940/jenkins.git']]])
            }
       }
        stage('编译构建') { steps {
                sh label: '', script: 'mvn clean package'
            }
        }
        stage('项目部署') {
            steps {
                deploy adapters: [tomcat8(credentialsId: 'afc43e5e-4a4e-4de6-984f-
                b1d5a254e434', path: '', url: 'http://localhost:8081')], contextPath: null,
                war: 'target/*.war'
            }
        }
    }
}